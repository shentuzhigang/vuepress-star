"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6457],{38703:(s,e,n)=>{n.r(e),n.d(e,{data:()=>a});const a=JSON.parse('{"key":"v-87f21adc","path":"/vuepress-next/reference/plugin/pwa.html","title":"pwa","lang":"en-US","frontmatter":{},"excerpt":"","headers":[{"level":2,"title":"Install","slug":"install","link":"#install","children":[]},{"level":2,"title":"Web App Manifests","slug":"web-app-manifests","link":"#web-app-manifests","children":[]},{"level":2,"title":"Options","slug":"options","link":"#options","children":[{"level":3,"title":"serviceWorkerFilename","slug":"serviceworkerfilename","link":"#serviceworkerfilename","children":[]}]},{"level":2,"title":"Composition API","slug":"composition-api","link":"#composition-api","children":[{"level":3,"title":"usePwaEvent","slug":"usepwaevent","link":"#usepwaevent","children":[]},{"level":3,"title":"useSkipWaiting","slug":"useskipwaiting","link":"#useskipwaiting","children":[]}]}],"git":{"createdTime":1635758933000,"updatedTime":1635758933000,"contributors":[{"name":"shentuzhigang","email":"shentuzhigang@moresec.cn","commits":1}]},"copyright":"","filePathRelative":"vuepress-next/reference/plugin/pwa.md","content":"# pwa\\n\\n<NpmBadge package=\\"@vuepress/plugin-pwa\\" />\\n\\nMake your VuePress site a [Progressive Web Application (PWA)](https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps).\\n\\nThis plugin uses [workbox-build](https://developers.google.com/web/tools/workbox/modules/workbox-build) to generate service worker file, and uses [register-service-worker](https://github.com/yyx990803/register-service-worker) to register service worker.\\n\\n## Install\\n\\n```bash\\nnpm i -D @vuepress/plugin-pwa@next\\n```\\n\\n## Web App Manifests\\n\\nTo make your website fully compliant with PWA, you need to create a [Web app manifests](https://developer.mozilla.org/en-US/docs/Web/Manifest) file and set the icons, colors, etc. for your PWA.\\n\\nYou need to put your manifest file and icons into the [public files directory](../../guide/assets.md#public-files). In the following example, we assume that you are using the default public directory `.vuepress/public`.\\n\\n1. Create manifest file\\n\\nTypically `.vuepress/public/manifest.webmanifest`:\\n\\n```json\\n{\\n  \\"name\\": \\"VuePress\\",\\n  \\"short_name\\": \\"VuePress\\",\\n  \\"description\\": \\"Vue-powered Static Site Generator\\",\\n  \\"start_url\\": \\"/index.html\\",\\n  \\"display\\": \\"standalone\\",\\n  \\"background_color\\": \\"#fff\\",\\n  \\"theme_color\\": \\"#3eaf7c\\",\\n  \\"icons\\": [\\n    {\\n      \\"src\\": \\"/images/icons/android-chrome-192x192.png\\",\\n      \\"sizes\\": \\"192x192\\",\\n      \\"type\\": \\"image/png\\"\\n    },\\n    {\\n      \\"src\\": \\"/images/icons/android-chrome-384x384.png\\",\\n      \\"sizes\\": \\"384x384\\",\\n      \\"type\\": \\"image/png\\"\\n    }\\n  ]\\n}\\n```\\n\\n2. Generate PWA icons\\n\\nTo make your PWA more accessible, you need to generate some icons, and put them inside the public directory.\\n\\nMake sure the path of icons matches the `icons` field in your manifest file:\\n\\n- `.vuepress/public/images/icons/android-chrome-192x192.png`\\n- `.vuepress/public/images/icons/android-chrome-384x384.png`\\n\\n::: tip\\nSome tools can help to do that. For example, [Favicon Generator](https://realfavicongenerator.net/) would help you to generate icons together with a sample manifest file.\\n:::\\n\\n3. Set tags in head\\n\\nYou also need to set some tags via [head](../config.md#head) option to [deploy the manifest](https://developer.mozilla.org/en-US/docs/Web/Manifest#deploying_a_manifest_with_the_link_tag):\\n\\n```js\\nmodule.exports = {\\n  head: [\\n    [\'link\', { rel: \'manifest\', href: \'/manifest.webmanifest\' }],\\n    [\'meta\', { name: \'theme-color\', content: \'#3eaf7c\' }],\\n    // ...other tags\\n  ]\\n}\\n```\\n\\n## Options\\n\\nThis plugin accepts all parameters of workbox-build\'s [generateSW method](https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW) in its options, except `globDirectory` and `swDest`.\\n\\nFor example, you can set `skipWaiting: true` to auto activate the new service worker once it is ready:\\n\\n```js\\nmodule.exports = {\\n  plugins: [\\n    [\\n      \'@vuepress/pwa\',\\n      {\\n        skipWaiting: true,\\n      },\\n    ],\\n  ],\\n}\\n```\\n\\nBut if you omit `skipWaiting` or set it to `false`, you have to activate the new service worker manually:\\n\\n- For users, you can use our [pwa-popup](./pwa-popup.md) plugin together.\\n- For developers, you can use our [composition API](#composition-api) to take control of the service worker behavior.\\n\\n### serviceWorkerFilename\\n\\n- Type: `string`\\n\\n- Default: `\'service-worker.js\'`\\n\\n- Details:\\n\\n  File path of the generated service worker file, which is relative to the [dest](../config.md#dest) directory.\\n\\n  The service worker file will only be generated in `build` mode.\\n\\n## Composition API\\n\\n### usePwaEvent\\n\\n- Details:\\n\\n  Returns the event emitter of this plugin.\\n  \\n  You can add listener function to events that provided by [register-service-worker](https://github.com/yyx990803/register-service-worker).\\n\\n- Example:\\n\\n```ts\\nimport { usePwaEvent } from \'@vuepress/plugin-pwa/lib/client\'\\n\\nexport default {\\n  setup() {\\n    const event = usePwaEvent()\\n    event.on(\'ready\', (registration) => {\\n      console.log(\'Service worker is active.\')\\n    })\\n  },\\n}\\n```\\n\\n### useSkipWaiting\\n\\n- Parameters:\\n\\n|  Parameter   | Type                        | Description                                              |\\n| ------------ | --------------------------- | -------------------------------------------------------- |\\n| registration | `ServiceWorkerRegistration` | The registration of the service worker you want activate |\\n\\n- Details:\\n\\n  Call [skipWaiting()](https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting) to activate the waiting service worker.\\n\\n- Example:\\n\\n```ts\\nimport {\\n  usePwaEvent,\\n  useSkipWaiting,\\n} from \'@vuepress/plugin-pwa/lib/client\'\\n\\nexport default {\\n  setup() {\\n    const event = usePwaEvent()\\n    event.on(\'updated\', (registration) => {\\n      console.log(\'The waiting service worker is available.\')\\n      // activate the waiting service worker\\n      useSkipWaiting(registration)\\n    })\\n  },\\n}\\n```\\n","author":[{"name":"shentuzhigang","email":"shentuzhigang@moresec.cn"}],"top":false,"length":605,"words":605,"readingTime":2.02}')},74923:(s,e,n)=>{n.r(e),n.d(e,{default:()=>ls});var a=n(1863);const l=(0,a._)("h1",{id:"pwa",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#pwa","aria-hidden":"true"},"#"),(0,a.Uk)(" pwa")],-1),o={href:"https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps",target:"_blank",rel:"noopener noreferrer"},t={href:"https://developers.google.com/web/tools/workbox/modules/workbox-build",target:"_blank",rel:"noopener noreferrer"},i={href:"https://github.com/yyx990803/register-service-worker",target:"_blank",rel:"noopener noreferrer"},p=(0,a._)("h2",{id:"install",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#install","aria-hidden":"true"},"#"),(0,a.Uk)(" Install")],-1),r={class:"code-enhance"},c=(0,a.uE)('<div class="language-bash line-numbers-mode" data-ext="sh"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">npm i -D @vuepress/plugin-pwa@next</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>',1),u=(0,a._)("h2",{id:"web-app-manifests",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#web-app-manifests","aria-hidden":"true"},"#"),(0,a.Uk)(" Web App Manifests")],-1),D={href:"https://developer.mozilla.org/en-US/docs/Web/Manifest",target:"_blank",rel:"noopener noreferrer"},d=(0,a._)("code",null,".vuepress/public",-1),y=(0,a._)("ol",null,[(0,a._)("li",null,"Create manifest file")],-1),v=(0,a._)("p",null,[(0,a.Uk)("Typically "),(0,a._)("code",null,".vuepress/public/manifest.webmanifest"),(0,a.Uk)(":")],-1),m={class:"code-enhance"},h=(0,a.uE)('<div class="language-json line-numbers-mode" data-ext="json"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">{</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;VuePress&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;short_name&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;VuePress&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;description&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;Vue-powered Static Site Generator&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;start_url&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;/index.html&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;display&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;standalone&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;background_color&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#fff&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;theme_color&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;#3eaf7c&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">&quot;icons&quot;</span><span style="color:#D4D4D4;">: [</span></span>\n<span class="line"><span style="color:#D4D4D4;">    {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;src&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;/images/icons/android-chrome-192x192.png&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;sizes&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;192x192&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;image/png&quot;</span></span>\n<span class="line"><span style="color:#D4D4D4;">    },</span></span>\n<span class="line"><span style="color:#D4D4D4;">    {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;src&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;/images/icons/android-chrome-384x384.png&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;sizes&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;384x384&quot;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">&quot;type&quot;</span><span style="color:#D4D4D4;">: </span><span style="color:#CE9178;">&quot;image/png&quot;</span></span>\n<span class="line"><span style="color:#D4D4D4;">    }</span></span>\n<span class="line"><span style="color:#D4D4D4;">  ]</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),g=(0,a._)("ol",{start:"2"},[(0,a._)("li",null,"Generate PWA icons")],-1),b=(0,a._)("p",null,"To make your PWA more accessible, you need to generate some icons, and put them inside the public directory.",-1),k=(0,a._)("p",null,[(0,a.Uk)("Make sure the path of icons matches the "),(0,a._)("code",null,"icons"),(0,a.Uk)(" field in your manifest file:")],-1),f=(0,a._)("ul",null,[(0,a._)("li",null,[(0,a._)("code",null,".vuepress/public/images/icons/android-chrome-192x192.png")]),(0,a._)("li",null,[(0,a._)("code",null,".vuepress/public/images/icons/android-chrome-384x384.png")])],-1),w={class:"custom-container tip"},C=(0,a._)("p",{class:"custom-container-title"},"TIP",-1),_={href:"https://realfavicongenerator.net/",target:"_blank",rel:"noopener noreferrer"},E=(0,a._)("ol",{start:"3"},[(0,a._)("li",null,"Set tags in head")],-1),x={href:"https://developer.mozilla.org/en-US/docs/Web/Manifest#deploying_a_manifest_with_the_link_tag",target:"_blank",rel:"noopener noreferrer"},W={class:"code-enhance"},U=(0,a.uE)('<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#4EC9B0;">module</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">exports</span><span style="color:#D4D4D4;"> = {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">head:</span><span style="color:#D4D4D4;"> [</span></span>\n<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#CE9178;">&#39;link&#39;</span><span style="color:#D4D4D4;">, { </span><span style="color:#9CDCFE;">rel:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;manifest&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">href:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;/manifest.webmanifest&#39;</span><span style="color:#D4D4D4;"> }],</span></span>\n<span class="line"><span style="color:#D4D4D4;">    [</span><span style="color:#CE9178;">&#39;meta&#39;</span><span style="color:#D4D4D4;">, { </span><span style="color:#9CDCFE;">name:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;theme-color&#39;</span><span style="color:#D4D4D4;">, </span><span style="color:#9CDCFE;">content:</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;#3eaf7c&#39;</span><span style="color:#D4D4D4;"> }],</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#6A9955;">// ...other tags</span></span>\n<span class="line"><span style="color:#D4D4D4;">  ]</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),q=(0,a._)("h2",{id:"options",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#options","aria-hidden":"true"},"#"),(0,a.Uk)(" Options")],-1),F={href:"https://developers.google.com/web/tools/workbox/reference-docs/latest/module-workbox-build#.generateSW",target:"_blank",rel:"noopener noreferrer"},P=(0,a._)("code",null,"globDirectory",-1),A=(0,a._)("code",null,"swDest",-1),S=(0,a._)("p",null,[(0,a.Uk)("For example, you can set "),(0,a._)("code",null,"skipWaiting: true"),(0,a.Uk)(" to auto activate the new service worker once it is ready:")],-1),T={class:"code-enhance"},z=(0,a.uE)('<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#4EC9B0;">module</span><span style="color:#D4D4D4;">.</span><span style="color:#4EC9B0;">exports</span><span style="color:#D4D4D4;"> = {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">plugins:</span><span style="color:#D4D4D4;"> [</span></span>\n<span class="line"><span style="color:#D4D4D4;">    [</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#CE9178;">&#39;@vuepress/pwa&#39;</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      {</span></span>\n<span class="line"><span style="color:#D4D4D4;">        </span><span style="color:#9CDCFE;">skipWaiting:</span><span style="color:#D4D4D4;"> </span><span style="color:#569CD6;">true</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">      },</span></span>\n<span class="line"><span style="color:#D4D4D4;">    ],</span></span>\n<span class="line"><span style="color:#D4D4D4;">  ],</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),I=(0,a._)("p",null,[(0,a.Uk)("But if you omit "),(0,a._)("code",null,"skipWaiting"),(0,a.Uk)(" or set it to "),(0,a._)("code",null,"false"),(0,a.Uk)(", you have to activate the new service worker manually:")],-1),j=(0,a._)("li",null,[(0,a.Uk)("For developers, you can use our "),(0,a._)("a",{href:"#composition-api"},"composition API"),(0,a.Uk)(" to take control of the service worker behavior.")],-1),M=(0,a._)("h3",{id:"serviceworkerfilename",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#serviceworkerfilename","aria-hidden":"true"},"#"),(0,a.Uk)(" serviceWorkerFilename")],-1),B=(0,a._)("li",null,[(0,a._)("p",null,[(0,a.Uk)("Type: "),(0,a._)("code",null,"string")])],-1),G=(0,a._)("li",null,[(0,a._)("p",null,[(0,a.Uk)("Default: "),(0,a._)("code",null,"'service-worker.js'")])],-1),V=(0,a._)("p",null,"Details:",-1),R=(0,a._)("p",null,[(0,a.Uk)("The service worker file will only be generated in "),(0,a._)("code",null,"build"),(0,a.Uk)(" mode.")],-1),Y=(0,a._)("h2",{id:"composition-api",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#composition-api","aria-hidden":"true"},"#"),(0,a.Uk)(" Composition API")],-1),O=(0,a._)("h3",{id:"usepwaevent",tabindex:"-1"},[(0,a._)("a",{class:"header-anchor",href:"#usepwaevent","aria-hidden":"true"},"#"),(0,a.Uk)(" usePwaEvent")],-1),N=(0,a._)("p",null,"Details:",-1),L=(0,a._)("p",null,"Returns the event emitter of this plugin.",-1),J={href:"https://github.com/yyx990803/register-service-worker",target:"_blank",rel:"noopener noreferrer"},Z=(0,a._)("li",null,[(0,a._)("p",null,"Example:")],-1),H={class:"code-enhance"},K=(0,a.uE)('<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">usePwaEvent</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/plugin-pwa/lib/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">event</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">usePwaEvent</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">event</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;ready&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;Service worker is active.&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    })</span></span>\n<span class="line"><span style="color:#D4D4D4;">  },</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),Q=(0,a.uE)('<h3 id="useskipwaiting" tabindex="-1"><a class="header-anchor" href="#useskipwaiting" aria-hidden="true">#</a> useSkipWaiting</h3><ul><li>Parameters:</li></ul><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>registration</td><td><code>ServiceWorkerRegistration</code></td><td>The registration of the service worker you want activate</td></tr></tbody></table>',3),X=(0,a._)("p",null,"Details:",-1),$={href:"https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerGlobalScope/skipWaiting",target:"_blank",rel:"noopener noreferrer"},ss=(0,a._)("li",null,[(0,a._)("p",null,"Example:")],-1),es={class:"code-enhance"},ns=(0,a.uE)('<div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">usePwaEvent</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">useSkipWaiting</span><span style="color:#D4D4D4;">,</span></span>\n<span class="line"><span style="color:#D4D4D4;">} </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/plugin-pwa/lib/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">event</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">usePwaEvent</span><span style="color:#D4D4D4;">()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">event</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">on</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;updated&#39;</span><span style="color:#D4D4D4;">, (</span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">) </span><span style="color:#569CD6;">=&gt;</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#CE9178;">&#39;The waiting service worker is available.&#39;</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#6A9955;">// activate the waiting service worker</span></span>\n<span class="line"><span style="color:#D4D4D4;">      </span><span style="color:#DCDCAA;">useSkipWaiting</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">registration</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">    })</span></span>\n<span class="line"><span style="color:#D4D4D4;">  },</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',1),as={},ls=(0,n(94598).Z)(as,[["render",function(s,e){const n=(0,a.up)("NpmBadge"),as=(0,a.up)("ExternalLinkIcon"),ls=(0,a.up)("CodeCopyButton"),os=(0,a.up)("RouterLink");return(0,a.wg)(),(0,a.iD)("div",null,[l,(0,a.Wm)(n,{package:"@vuepress/plugin-pwa"}),(0,a._)("p",null,[(0,a.Uk)("Make your VuePress site a "),(0,a._)("a",o,[(0,a.Uk)("Progressive Web Application (PWA)"),(0,a.Wm)(as)]),(0,a.Uk)(".")]),(0,a._)("p",null,[(0,a.Uk)("This plugin uses "),(0,a._)("a",t,[(0,a.Uk)("workbox-build"),(0,a.Wm)(as)]),(0,a.Uk)(" to generate service worker file, and uses "),(0,a._)("a",i,[(0,a.Uk)("register-service-worker"),(0,a.Wm)(as)]),(0,a.Uk)(" to register service worker.")]),p,(0,a._)("div",r,[c,(0,a.Wm)(ls)]),u,(0,a._)("p",null,[(0,a.Uk)("To make your website fully compliant with PWA, you need to create a "),(0,a._)("a",D,[(0,a.Uk)("Web app manifests"),(0,a.Wm)(as)]),(0,a.Uk)(" file and set the icons, colors, etc. for your PWA.")]),(0,a._)("p",null,[(0,a.Uk)("You need to put your manifest file and icons into the "),(0,a.Wm)(os,{to:"/vuepress-next/guide/assets.html#public-files"},{default:(0,a.w5)((()=>[(0,a.Uk)("public files directory")])),_:1}),(0,a.Uk)(". In the following example, we assume that you are using the default public directory "),d,(0,a.Uk)(".")]),y,v,(0,a._)("div",m,[h,(0,a.Wm)(ls)]),g,b,k,f,(0,a._)("div",w,[C,(0,a._)("p",null,[(0,a.Uk)("Some tools can help to do that. For example, "),(0,a._)("a",_,[(0,a.Uk)("Favicon Generator"),(0,a.Wm)(as)]),(0,a.Uk)(" would help you to generate icons together with a sample manifest file.")])]),E,(0,a._)("p",null,[(0,a.Uk)("You also need to set some tags via "),(0,a.Wm)(os,{to:"/vuepress-next/reference/config.html#head"},{default:(0,a.w5)((()=>[(0,a.Uk)("head")])),_:1}),(0,a.Uk)(" option to "),(0,a._)("a",x,[(0,a.Uk)("deploy the manifest"),(0,a.Wm)(as)]),(0,a.Uk)(":")]),(0,a._)("div",W,[U,(0,a.Wm)(ls)]),q,(0,a._)("p",null,[(0,a.Uk)("This plugin accepts all parameters of workbox-build’s "),(0,a._)("a",F,[(0,a.Uk)("generateSW method"),(0,a.Wm)(as)]),(0,a.Uk)(" in its options, except "),P,(0,a.Uk)(" and "),A,(0,a.Uk)(".")]),S,(0,a._)("div",T,[z,(0,a.Wm)(ls)]),I,(0,a._)("ul",null,[(0,a._)("li",null,[(0,a.Uk)("For users, you can use our "),(0,a.Wm)(os,{to:"/vuepress-next/reference/plugin/pwa-popup.html"},{default:(0,a.w5)((()=>[(0,a.Uk)("pwa-popup")])),_:1}),(0,a.Uk)(" plugin together.")]),j]),M,(0,a._)("ul",null,[B,G,(0,a._)("li",null,[V,(0,a._)("p",null,[(0,a.Uk)("File path of the generated service worker file, which is relative to the "),(0,a.Wm)(os,{to:"/vuepress-next/reference/config.html#dest"},{default:(0,a.w5)((()=>[(0,a.Uk)("dest")])),_:1}),(0,a.Uk)(" directory.")]),R])]),Y,O,(0,a._)("ul",null,[(0,a._)("li",null,[N,L,(0,a._)("p",null,[(0,a.Uk)("You can add listener function to events that provided by "),(0,a._)("a",J,[(0,a.Uk)("register-service-worker"),(0,a.Wm)(as)]),(0,a.Uk)(".")])]),Z]),(0,a._)("div",H,[K,(0,a.Wm)(ls)]),Q,(0,a._)("ul",null,[(0,a._)("li",null,[X,(0,a._)("p",null,[(0,a.Uk)("Call "),(0,a._)("a",$,[(0,a.Uk)("skipWaiting()"),(0,a.Wm)(as)]),(0,a.Uk)(" to activate the waiting service worker.")])]),ss]),(0,a._)("div",es,[ns,(0,a.Wm)(ls)])])}]])}}]);